# ----------------------------------------------------------------------------
# HTCondor Jobqueue Configuration
# ----------------------------------------------------------------------------
jobqueue:
  
  # CoffeaCasa Cluster Configuration
  coffea-casa:
    # Job naming
    name: "dask-worker"
    
    # Resource allocation per worker
    cores: 1                  # 1 CPU core per worker
    memory: "4GiB"            # 4 GB RAM per worker
    disk: "2GiB"              # 2 GB disk per worker
    processes: 1              # 1 Python process per worker
    
    # Worker container image
    worker-image: "hub.opensciencegrid.org/coffea-casa/cc-analysis-ubuntu:development"
    
    # Communication settings
    python: null
    interface: null
    death-timeout: 60         # Wait 60s for scheduler before giving up
    local-directory: null
    shared-temp-directory: null
    
    # Worker command
    worker-command: "distributed.cli.dask_worker"
    worker-extra-args: []
    
    # HTCondor-specific options
    env-extra: null
    job-script-prologue: []
    job-extra: null
    
    # Additional HTCondor submit directives
    job-extra-directives:
      # Set accounting group for usage tracking
      "+AccountingGroup": '"cms.other.coffea.$ENV(HOSTNAME)"'
      
      # Request encrypted file transfer
      encrypt_input_files: ""
      
      # File transfer settings
      should_transfer_files: "YES"
      when_to_transfer_output: "ON_EXIT_OR_EVICT"
      transfer_output_files: ""
    
    # Directives to skip (if any default ones cause issues)
    job-directives-skip: []
    
    # HTCondor submit command options
    submit-command-extra: ["-spool"]
    cancel-command-extra: []
    
    # Logging
    log-directory: null
    
    # Submit file shebang
    shebang: "#!/usr/bin/env condor_submit"